# 前后端分离部署方案（简化版 ）

## 一、先给出结论（整套方案在干什么）

这一套方案的目标只有一句话：

> **前端 Vue 页面托管在腾讯云对象存储（COS），
>  后端 Spring Boot 跑在服务器上，通过 Nginx 用二级域名提供 API。**

最终效果是：

- 访问网站页面：

  ```
  https://www.example.com
  ```

- 页面里的接口请求：

  ```
  https://api.example.com/xxx
  ```

------

## 二、整体结构（必须先理解）

![Image](https://tigerchain.oss-cn-hangzhou.aliyuncs.com/bui-wanandroid/imgs/old_develop_pattern.png?utm_source=chatgpt.com)

![Image](https://s2.51cto.com/images/blog/202312/27194645_658c0ea516e6e69449.png?x-oss-process=image%2Fwatermark%2Csize_14%2Ctext_QDUxQ1RP5Y2a5a6i%2Ccolor_FFFFFF%2Ct_30%2Cg_se%2Cx_10%2Cy_10%2Cshadow_20%2Ctype_ZmFuZ3poZW5naGVpdGk%3D&utm_source=chatgpt.com)

这套架构里只有 4 个关键角色：

| 组件   | 角色定位 | 一句话理解     |
| ------ | -------- | -------------- |
| 域名   | 入口     | 用户访问的地址 |
| COS    | 前端托管 | 放静态网页     |
| 服务器 | 后端运行 | 跑 Spring Boot |
| Nginx  | 中间人   | 接域名，转请求 |

------

## 三、前端部分：为什么用 COS？

### 1️⃣ 前端本质是什么？

Vue 项目 `npm run build` 之后，只剩下：

- `index.html`
- `.js`
- `.css`
- 图片

✅ **都是静态文件**
 ✅ 不需要 Java
 ✅ 不需要服务器运行

------

### 2️⃣ COS 是干什么用的？

腾讯云 COS 在这里的作用可以理解为：

> **一个“专门放网页文件的云盘 + 自带访问能力”**

它能：

- 存放前端打包后的静态文件
- 直接通过浏览器访问
- 绑定自己的域名

------

### 3️⃣ 前端部署怎么做（流程级）

**只需要 4 步：**

1. Vue 项目打包

   ```bash
   npm run build
   ```

2. 得到 `dist/` 目录

3. 把 `dist/` 上传到 COS

4. 打开 COS 的「静态网站托管」

✅ 到这一步，**前端已经上线**

------

### 4️⃣ 一级域名给前端

- 域名：

  ```
  www.example.com
  ```

- DNS 指向：COS 提供的访问地址

✅ 浏览器访问域名
 ✅ 实际访问的是 COS 里的 `index.html`

------

## 四、后端部分：Spring Boot + Nginx

### 1️⃣ 后端该干什么？

后端只做一件事：

> **返回 JSON 数据（API）**

Spring Boot 启动后，例如：

```
http://localhost:8080
```

⚠️ 这个地址**不直接给用户访问**

------

### 2️⃣ 为什么一定要有 Nginx？

Nginx 在这里是**对外窗口**。

它负责：

| 事情         | 说明             |
| ------------ | ---------------- |
| 接受域名访问 | 浏览器只认域名   |
| 处理 HTTPS   | 证书放这里       |
| 转发请求     | 转给 Spring Boot |
| 隐藏端口     | 不暴露 8080      |

------

### 3️⃣ 二级域名给 API

我们专门给接口一个域名：

```
api.example.com
```

访问流程是：

```
浏览器
 → api.example.com
 → Nginx（443）
 → Spring Boot（8080）
```

✅ 浏览器永远不知道后端真实端口
 ✅ 后端只面对 Nginx

------

## 五、前端如何访问后端？

在前端代码中：

```js
axios.get("https://api.example.com/user/list")
```

**重点理解：**

- 前端只知道「API 域名」
- 不关心后端是 Java 还是别的
- 不关心服务器 IP 和端口

👉 **这就是前后端分离的核心**

------

## 六、域名在整套方案里的作用（非常关键）

### 为什么要分两个域名？

| 域名              | 用途 |
| ----------------- | ---- |
| `www.example.com` | 页面 |
| `api.example.com` | 接口 |

这样做的好处：

- 前端和后端**彻底解耦**
- 页面和接口职责清晰
- 更符合真实项目结构

------

## 七、和“全丢服务器”的方案对比（简明）

| 对比点     | 传统方案 | 现在方案 |
| ---------- | -------- | -------- |
| 前端       | 放服务器 | 放 COS   |
| 后端       | 放服务器 | 放服务器 |
| 服务器压力 | 大       | 小       |
| 架构清晰度 | 低       | 高       |
| 是否工程化 | 否       | 是       |

------

## 八、整套流程（一句话闭环）

> 用户访问 `www.example.com` →
>  页面从 COS 加载 →
>  页面请求 `api.example.com` →
>  请求经过 Nginx →
>  Spring Boot 返回数据 →
>  页面渲染

------

## 九、需要明白的 3 个点

1️⃣ **前端不等于服务器程序，它只是静态资源**
 2️⃣ **Nginx 是后端对外的门面，不是 Spring Boot**
 3️⃣ **域名不是随便起的，是架构的一部分**

------

## 十、总结一句话

> 前端 Vue 打包后是静态文件，放到腾讯云 COS，用一级域名访问；
>  后端 Spring Boot 跑在服务器上，用 Nginx 通过二级域名对外提供 API；
>  页面和接口通过不同域名通信，这才是标准的前后端分离部署方式。